![API_gateway.png](images%2FAPI_gateway.png)

### API Gateway 를 사용했을 때의 장점은 다음과 같다.

1.  백엔드 서버가 micro service 로 구성된 경우, 모든 요청을 APIGateway 가 받아, **적절한 서비스에 라우팅**할 수 있다.
   - 결과적으로 client 는 micro service 들과 직접 연관되지 않고 API Gateway 를 통해 모든 서비스의 기능을 호출할 수 있다.
   - 만약 API Gateway 가 없다면 사용자는 기능마다(서비스마다) 형태가 다른 API 를 호출해야 할 것이다. 
2. **인증, 권한부여를 API Gateway 에서 일괄 처리**하는 중앙집중식 관리가 가능하다.
3. 설정에 따라, 사용자의 요청에 맞는 서비스를 찾아 라우팅할 수 있다. (1번 항목의 연장)
   - 단순히 요청에 맞는 서비스를 찾는 것이 아닌, 사용자의 spec 을 분석하여 그에 맞는 service 에 요청을 라우팅할 수 있다.
     - 예로, 사용자의 device 가 mobile 인 경우, Web Frontend 서비스가 아닌 Mobile service 로 라우팅할 수 있다는 것이다.
4. 특정 요청에 대한 **응답을 캐싱**하여 부하를 줄인다.
5. API Gateway 에 모니터링 구성을 추가하여, **트래픽 패턴 분석** 등이 가능하다.

![API_Gateway2.png](images%2FAPI_Gateway2.png)
6. 서로 다른 프로토콜을 제공하는 client 및 백엔드 서비스를 일괄적으로 처리할 수 있다.
   - 사용자로부터 전달받은 요청을, 백엔드 서비스의 프로토콜에 맞춰 변환 후 전달

---
## 주의점
- API Gateway 가 너무 많은 일을 하게 될 수 있는데, 이는 결국 API Gateway 가 하나의 서비스처럼 동작하게 만든다.
  - 위 상황에서는 유지보수가 매우 어렵게되며, 수정 후 배포했는데 잘못된 설정이 있거나 혹은 **API Gateway 자체에 장애가 발생하는 경우 시스템 전체를 사용할 수 없게 되는 치명적인 오류 상황**이 발생한다.
  - 따라서 API Gateway 자체에 너무 많은 기능을 부여하지 말고, 배포 시 신중 또 신중해야 한다.