## 공유자원, 경쟁상태, 임계 영역

### 1. 공유 자원(Shared Resources)

> 프로세스나 스레드들이 공통으로 사용하는 자원을 말한다. 예를 들어, 여러 프로세스가 동시에 접근할 수 있는 메모리 영역, 파일, 데이터베이스 연결 등이 있다. 공유 자원은 동시에 여러 프로세스에 의해 사용될 수 있기 때문에 동시성 제어가 필요하다. 

예를 들어, 두 프로세스가 동시에 같은 파일에 쓰기 작업을 하려고 할 때, 두 프로세스의 작업이 서로 간섭하여 파일이 손상될 수 있다. 이를 방지하기 위해 파일에 대한 접근을 동기화하는 메커니즘이 필요하다.

### 2. 경쟁 상태(Race Conditions)
> 두 개 이상의 프로세스나 스레드가 동시에 공유 자원에 접근하려고 할 때, 그 실행 순서에 따라 결과가 달라질 수 있는 상황을 말한다. <br>
> 경쟁 상태는 데이터의 일관성과 정확성을 해칠 수 있다.

예를 들어, 은행 계좌에 대한 입금과 출금이 동시에 이루어질 때, 각각의 작업 순서에 따라 최종 계좌 잔액이 달라질 수 있다. 이러한 상황을 제어하지 않으면, 계좌 잔액에 오류가 발생할 수 있다.

### 3. 임계 영역(Critical Sections)
> 공유 자원에 접근하는 코드의 일부분으로, 한 번에 하나의 프로세스만이 실행할 수 있어야 하는 영역을 말한다. 임계 영역에서는 다른 프로세스가 동시에 접근하지 못하게 하는 동기화 기법이 필요하다.

여러 스레드가 같은 메모리 영역의 데이터를 수정할 때, 한 스레드가 임계 영역에 있는 경우 다른 스레드가 그 영역에 들어갈 수 없도록 하기 위해 위해 뮤텍스나 세마포어 같은 동기화 도구를 사용한다.

---
## 동기화 기법

### 1. 뮤텍스(Mutex):

1. **사용 상황**
<br>뮤텍스는 한 번에 하나의 스레드만이 특정 자원이나 중요 영역에 접근하도록 할 때 사용된다. 예를 들어, 공유된 자원에 대한 접근을 동기화할 필요가 있을 때 뮤텍스를 사용한다.


2. **특징**
<br>뮤텍스는 상호 배제를 보장한다. 즉, 뮤텍스를 소유한 스레드만이 해당 자원에 접근할 수 있다. 다른 스레드가 접근하려면 뮤텍스가 해제될 때까지 기다려야 한다.


3. **사용 예**
<br>뮤텍스는 파일 시스템의 접근 제어, 메모리 관리, 데이터베이스 연결 등의 자원을 동기화할 때 널리 사용된다. 예를 들어, 로그 파일에 여러 스레드가 동시에 로그를 작성하지 못하도록 제어하는데 사용된다.


### 2. 세마포어(Semaphore):

1. **사용 상황** 
<br>세마포어는 동시에 여러 스레드가 자원에 접근하는 것을 허용하되, 그 수를 제한하고 싶을 때 사용한다. 예를 들어, 제한된 수의 데이터베이스 연결 또는 파일 핸들러 등을 관리할 때 유용하다.


2. **특징** 
<br>세마포어는 내부 카운터를 가지며, 이 카운터는 동시에 자원에 접근할 수 있는 스레드의 수를 제한한다. 카운터가 0이면, 다른 스레드는 자원이 해제될 때까지 기다려야 한다.


3. **사용 예**
<br>세마포어는 특히 동시에 제한된 수의 자원에 접근해야 하는 상황에서 사용된다. 예를 들어, 고정된 수의 데이터베이스 연결이나 네트워크 연결을 관리하는데 사용될 수 있다. 또한, 운영체제의 프로세스 스케줄링 또는 멀티스레드 프로그램에서 여러 자원을 공정하게 사용하기 위해 사용된다.

### 3. 모니터(Monitor):

1. **사용 상황** 
<br>모니터는 클래스 또는 객체 수준에서 스레드 동기화를 필요로 할 때 사용된다. 예를 들어, 객체의 메소드에 대한 접근을 동기화해야 할 때 모니터를 사용한다.


2. **특징** 
<br>모니터 내의 모든 메소드는 자동으로 뮤텍스로 보호된다. 즉, 한 번에 하나의 스레드만이 모니터의 메소드를 실행할 수 있다. 또한, 조건 변수를 사용하여 특정 조건에서 스레드를 대기시키거나 깨울 수 있다.


3. **사용 예**
<br>모니터는 객체 지향 프로그래밍 언어에서 클래스의 메소드에 대한 동시 접근을 제어하는데 주로 사용된다. 예를 들어, Java에서는 synchronized 키워드를 사용하여 객체의 메소드 또는 블록을 모니터로 만들어, 한 번에 하나의 스레드만이 해당 메소드나 블록을 실행하도록 한다. 은행 계좌 관리 시스템이나 공유 데이터를 다루는 어플리케이션에서 유용하게 사용된다.
